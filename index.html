<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Apple ID â€“ Ø¨Ø·Ø§Ù‚Ø© Ù…Ø¹Ù„ÙˆÙ…Ø§Øª</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <style>
    :root{
      --overlay: rgba(15,16,20,.55);
      --card-bg: #fff;
      --card-border: #e7e7ea;
      --muted: #6b7280;
      --text: #111827;
      --row-bg: #f7f7fb;
      --row-border: #e9e9f2;
      --primary: #2563eb;
      --primary-600:#1e50bd;
      --danger: #ef4444;
      --ghost:#f3f4f6;
      --shadow: 0 10px 40px rgba(0,0,0,.18);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;color:var(--text);background:#f2f3f6}
    .backdrop{position:fixed;inset:0;background:var(--overlay);display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:min(720px,96vw);background:var(--card-bg);border:1px solid var(--card-border);border-radius:24px;box-shadow:var(--shadow);overflow:hidden}
    .header{display:flex;align-items:center;gap:12px;padding:18px 20px;border-bottom:1px solid var(--card-border)}
    .title{font-size:20px;font-weight:700}
    .close{margin-inline-start:auto;background:#fff;border:1px solid var(--card-border);width:36px;height:36px;display:grid;place-items:center;border-radius:999px;cursor:pointer;font-size:18px}
    .content{padding:16px 16px 0}
    .footer{display:flex;justify-content:flex-end;gap:10px;padding:14px 16px 16px;border-top:1px solid var(--card-border);background:#fff}
    .section-title{font-weight:600;margin:12px 6px 8px}
    .note{color:var(--muted);font-size:13px;margin:0 6px 12px}
    .row{display:flex;align-items:center;gap:10px;background:var(--row-bg);border:1px solid var(--row-border);border-radius:12px;padding:10px 12px;margin:8px 0}
    .row input{flex:1;background:transparent;border:none;outline:none;font-size:16px;color:var(--text);padding:8px 6px}
    .btn{border:none;cursor:pointer;font-weight:600;border-radius:12px;padding:10px 14px;display:inline-flex;align-items:center;gap:8px}
    .btn-primary{background:var(--primary);color:#fff}.btn-primary:hover{background:var(--primary-600)}
    .btn-ghost{background:#fff;color:var(--text);border:1px solid var(--card-border)}
    .btn-soft{background:var(--ghost);color:var(--text)}
    .btn-icon{width:42px;height:42px;display:grid;place-items:center;border-radius:10px;background:#fff;border:1px solid var(--card-border);font-size:18px}
    .btn-copy{background:#ef4444;color:#fff;border:none}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:580px){.two{grid-template-columns:1fr}}
    .page{display:none}.page.active{display:block}
    .banner{margin:0 16px 8px;padding:8px 12px;border-radius:12px;background:#eef2ff;color:#1d4ed8;font-size:13px;border:1px solid #dfe7ff}
    .hidden{display:none !important}
    .qrbox{display:grid;place-items:center;padding:16px}
    .hint{color:var(--muted);font-size:12px;text-align:center;margin:0 18px 14px}
  </style>
</head>
<body>
  <div class="backdrop">
    <div class="card" id="card-root">
      <div class="header">
        <div class="title" id="modalTitle">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</div>
        <button class="close" id="closeBtn" title="Ø¥ØºÙ„Ø§Ù‚">âœ•</button>
      </div>

      <div id="roBanner" class="banner hidden">ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶ â€” ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙŠØ¯ÙˆÙŠÙ‹Ø§ ÙˆØ§Ù„Ù†Ø³Ø® Ø£Ùˆ Ø­ÙØ¸ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ÙƒØµÙˆØ±Ø©.</div>

      <!-- Ø§Ù„Ø´Ø±ÙˆØ· -->
      <div id="page-terms" class="page active">
        <div class="content">
          <div class="section-title">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</div>
          <p class="note">Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.</p>
          <div class="row" style="align-items:start; padding:14px">
            <div style="line-height:1.8">
              <strong>Ù…Ø­ÙØ¸Ø© Ø­Ø³Ø§Ø¨ APPLE ID:</strong>
              <ul style="margin:8px 18px">
                <li>Ù‡Ø°Ø§ Ø§Ù„ÙƒØ§Ø±Øª Ù‡Ùˆ Ù…Ø­ÙØ¸Ø© Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø­Ø³Ø§Ø¨Ùƒ.</li>
                <li>ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¹Ù† Ø·Ø±ÙŠÙ‚ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆÙ‡Ùˆ Ø¢Ù…Ù† ÙˆÙ…Ø¶Ù…ÙˆÙ†.</li>
                <li>Ø£Ù†Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù† Ø£ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù… ØºÙŠØ± Ù‚Ø§Ù†ÙˆÙ†ÙŠ.</li>
                <li>Ø³ÙŠØªÙ… Ø­ÙØ¸ Ù…ÙˆØ§ÙÙ‚ØªÙƒ Ù…Ø­Ù„ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ.</li>
                <li>Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ ØªÙØ¹ÙŠÙ„ Ù…ÙŠØ²Ø© Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ iPhone.</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="footer">
          <button class="btn btn-ghost" id="declineBtn">Ø¥Ù„ØºØ§Ø¡</button>
          <button class="btn btn-primary" id="agreeBtn">Ù…ÙˆØ§ÙÙ‚</button>
        </div>
      </div>

      <!-- ØµÙØ­Ø© Ø§Ù„Ù‡Ø§ØªÙ (Ù„Ù„Ù…Ø´Ø§Ù‡ÙØ¯ ÙÙ‚Ø·) -->
      <div id="page-phone" class="page">
        <div class="content">
          <div class="section-title">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</div>
          <p class="note">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙÙƒ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ) Ù„ÙŠÙØ¶Ø§Ù Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©. ÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„Ù‡ Ù„Ø§Ø­Ù‚Ù‹Ø§.</p>
          <div class="row">
            <input id="phoneInput" type="tel" placeholder="+9647777777777" autocomplete="tel">
          </div>
        </div>
        <div class="footer">
          <button class="btn btn-ghost" onclick="backToTerms()">Ø±Ø¬ÙˆØ¹</button>
          <button class="btn btn-primary" onclick="proceedPhone()">Ù…ØªØ§Ø¨Ø¹Ø©</button>
        </div>
      </div>

      <!-- ØµÙØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª -->
      <div id="page-form" class="page">
        <div id="roTopNote" class="banner hidden">ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶: Ø£Ø²Ø±Ø§Ø± Â«Ù†Ø³Ø®Â» Ù†ØµÙ‘ÙŠØ©ØŒ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø¹Ø±ÙˆØ¶Ø© Ø¯Ø§Ø¦Ù…Ù‹Ø§ ÙˆÙŠÙ…ÙƒÙ†Ùƒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙŠØ¯ÙˆÙŠÙ‹Ø§.</div>

        <div class="content">
          <div class="section-title">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</div>
          <div class="row">
            <button class="btn btn-copy copy-btn" data-target="email">ğŸ“‹</button>
            <input id="email" type="email" placeholder="name@icloud.com" autocomplete="off">
          </div>

          <div class="section-title">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</div>
          <div class="row">
            <button class="btn btn-copy copy-btn" data-target="password">ğŸ“‹</button>
            <!-- Ø³ØªÙƒÙˆÙ† Ù†Øµ Ø¯Ø§Ø¦Ù…Ù‹Ø§ ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶ -->
            <input id="password" type="text" placeholder="@VJQRgts" autocomplete="off">
            <button class="btn-icon" id="eyeBtn" title="Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡" onclick="togglePass()">ğŸ‘ï¸</button>
          </div>

          <div class="two">
            <div>
              <div class="section-title">First Name</div>
              <div class="row">
                <button class="btn btn-copy copy-btn" data-target="fname">ğŸ“‹</button>
                <input id="fname" type="text" placeholder="Jorge">
                <button class="btn-icon" title="Generate First Name" onclick="genFirstName()">ğŸ²</button>
              </div>
            </div>
            <div>
              <div class="section-title">Last Name</div>
              <div class="row">
                <button class="btn btn-copy copy-btn" data-target="lname">ğŸ“‹</button>
                <input id="lname" type="text" placeholder="Garcia">
                <button class="btn-icon" title="Generate Last Name" onclick="genLastName()">ğŸ²</button>
              </div>
            </div>
          </div>

          <div class="section-title">Date of Birth</div>
          <div class="row">
            <button class="btn btn-copy copy-btn" data-target="dob">ğŸ“‹</button>
            <input id="dob" type="text" placeholder="1998/07/21" onblur="validateDOB()" autocomplete="off">
            <button class="btn-icon" title="Generate DOB 1990â€“2006" onclick="genDOB()">ğŸ²</button>
          </div>

          <div class="section-title">Phone Number</div>
          <div class="row">
            <button class="btn btn-copy copy-btn" data-target="phone">ğŸ“‹</button>
            <input id="phone" type="text" placeholder="+9647777777777">
          </div>

          <p class="hint">ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ù†ÙØ³ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª â€” Ø£Ùˆ Ø­ÙØ¸ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ÙƒØµÙˆØ±Ø©.</p>
          <div class="qrbox"><div id="qrcode"></div></div>
        </div>

        <div class="footer" id="ownerFooter">
          <button class="btn btn-soft" onclick="genIcloud()">Generate iCloud</button>
          <button class="btn btn-soft" onclick="genPassword()">Generate Password</button>
          <button class="btn btn-soft" onclick="genNames()">Generate Names</button>
          <button class="btn btn-soft" onclick="genDOB()">Generate DOB</button>
          <button class="btn btn-ghost" onclick="copyAll()">Copy All</button>
          <button class="btn btn-primary" onclick="makeQR()">Create QR</button>
        </div>

        <div class="footer hidden" id="viewerFooter">
          <button class="btn btn-ghost" onclick="copyAll()">Copy All</button>
          <button class="btn btn-primary" onclick="saveCardImage()">Save Card as Image</button>
          <button class="btn btn-soft" onclick="goToPhoneFromForm()">Ø±Ø¬ÙˆØ¹ Ù„Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    let BASE_URL = "";
    const TAC_KEY = "tacAccepted_modal_v2";
    const $ = id => document.getElementById(id);
    let READ_ONLY = false;

    function setTitle(t){ $("modalTitle").textContent = t; }
    function showPage(id){
      document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
      $(id).classList.add("active");
      if(id==="page-terms") setTitle("Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…");
      if(id==="page-phone") setTitle("Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ");
      if(id==="page-form")  setTitle("Ù…Ø­ÙØ¸Ø© Ø­Ø³Ø§Ø¨ Apple ID");
    }
    function backToTerms(){ showPage("page-terms"); }
    function goToPhoneFromForm(){ if(READ_ONLY) showPage("page-phone"); }

    document.addEventListener("DOMContentLoaded", ()=>{
      // Ø¥ØºÙ„Ø§Ù‚ Ø¨Ø³ÙŠØ·
      $("closeBtn").addEventListener("click", ()=>{
        const onTerms = $("page-terms").classList.contains("active");
        if(!onTerms) backToTerms(); else alert("Ø£ØºÙ„Ù‚ Ø§Ù„ØµÙØ­Ø© Ø¥Ø°Ø§ Ø£Ø±Ø¯Øª Ø§Ù„Ø®Ø±ÙˆØ¬.");
      });

      $("agreeBtn").addEventListener("click", acceptTerms);
      $("declineBtn").addEventListener("click", ()=>alert("ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡"));

      // Ø±Ø¨Ø· ÙƒÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø³Ø® Ø¨Ø¯Ø§Ù„Ø© ÙˆØ§Ø­Ø¯Ø©
      document.querySelectorAll(".copy-btn").forEach(btn=>{
        btn.addEventListener("click", ()=>copyField(btn.dataset.target));
      });

      prefillFromURL();
      detectReadOnlyByURL();

      // Ø§Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„Ø´Ø±ÙˆØ· Ø¯Ø§Ø¦Ù…Ù‹Ø§
      showPage("page-terms");

      // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¸Ø§Ù‡Ø±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§
      $("password").type = "text";
    });

    function acceptTerms(){
      try{ localStorage.setItem(TAC_KEY,"yes"); }catch(_){}
      // Ø§Ù„Ù…Ø§Ù„Ùƒ -> Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ø¨Ø§Ø´Ø±Ø© / Ø§Ù„Ù…Ø´Ø§Ù‡ÙØ¯ -> Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
      showPage(READ_ONLY ? "page-phone" : "page-form");
      if(READ_ONLY){
        enableViewerMode();
      }else{
        enableOwnerMode();
      }
    }

    function enableOwnerMode(){
      $("ownerFooter").classList.remove("hidden");
      $("viewerFooter").classList.add("hidden");
      $("roBanner").classList.add("hidden");
      $("roTopNote").classList.add("hidden");
      // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø³Ø® ØªØ¹ÙˆØ¯ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª
      document.querySelectorAll(".copy-btn").forEach(b=>b.textContent="ğŸ“‹");
      // Ø²Ø± Ø§Ù„Ø¹ÙŠÙ† Ø¸Ø§Ù‡Ø±
      $("eyeBtn").classList.remove("hidden");
    }

    // === Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ø±Ø¶ ===
    function enableViewerMode(){
      READ_ONLY = true;
      $("roBanner").classList.remove("hidden");
      $("roTopNote").classList.remove("hidden");
      $("viewerFooter").classList.remove("hidden");
      $("ownerFooter").classList.add("hidden");
      // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø³Ø® Ù†Øµ "Ù†Ø³Ø®"
      document.querySelectorAll(".copy-btn").forEach(b=>b.textContent="Ù†Ø³Ø®");
      // ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¸Ø§Ù‡Ø±Ø© Ø¯Ø§Ø¦Ù…Ù‹Ø§ ÙˆØ¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø¹ÙŠÙ†
      $("password").type = "text";
      $("eyeBtn").classList.add("hidden");
      // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ØªØ­Ø±ÙŠØ± ÙŠØ¯ÙˆÙŠÙ‹Ø§: Ù„Ø§ Ù†Ø·Ø¨Ù‘Ù‚ Ø£ÙŠ readOnly Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù‚ÙˆÙ„
    }

    function proceedPhone(){
      const val = ($("phoneInput").value||"").trim();
      // Ø§Ù„Ù‡Ø§ØªÙ Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ø§Ù„Ø¢Ù† ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª
      if(val) $("phone").value = val;
      showPage("page-form");
      if(READ_ONLY) enableViewerMode();
    }

    function detectReadOnlyByURL(){
      const q = new URLSearchParams(location.search);
      READ_ONLY = ["email","password","fname","lname","dob","phone"].some(k=>q.get(k));
      if(READ_ONLY){
        // Ø³Ù†Ø­ÙˆÙ‘Ù„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø³Ø® Ø¥Ù„Ù‰ Ù†Øµ ÙˆÙ†Ø¬Ø¹Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¸Ø§Ù‡Ø±Ø© Ø¹Ù†Ø¯Ù…Ø§ Ù†ØµÙ„ Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
        $("viewerFooter").classList.remove("hidden");
      } else {
        $("ownerFooter").classList.remove("hidden");
      }
    }

    function togglePass(){
      const f=$("password");
      f.type = (f.type==="password")?"text":"password";
    }

    // ØªÙˆÙ„ÙŠØ¯/ØªØ­Ù‚Ù‚/Ù†Ø³Ø® ÙˆØ¨Ù‚ÙŠØ© Ø§Ù„Ø£Ø¯ÙˆØ§Øª
    function toast(m){ alert(m); }
    function pad2(n){return String(n).padStart(2,"0")}
    function daysInMonth(y,m){ return new Date(y,m,0).getDate(); }
    function randomDOB(){ const y=1990+Math.floor(Math.random()*(2006-1990+1)); const m=1+Math.floor(Math.random()*12); const d=1+Math.floor(Math.random()*daysInMonth(y,m)); return `${y}/${pad2(m)}/${pad2(d)}`; }
    function genDOB(){ $("dob").value=randomDOB(); }
    function validateDOB(){ const v=$("dob").value.trim(); if(!v)return; const m=v.match(/^(\d{4})[\/\-](\d{1,2})[\/\-](\d{1,2})$/); if(!m)return toast("ØµÙŠØºØ© ØºÙŠØ± ØµØ­ÙŠØ­Ø©: YYYY/MM/DD"); const y=+m[1],mo=+m[2],d=+m[3]; if(y<1990||y>2006)return toast("Ø§Ù„Ø³Ù†Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø¨ÙŠÙ† 1990 Ùˆ 2006"); const dim=daysInMonth(y,mo); if(mo<1||mo>12||d<1||d>dim)return toast("ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ­ÙŠØ­"); $("dob").value=`${y}/${pad2(mo)}/${pad2(d)}`; }

    const FIRST=["James","John","Robert","Michael","William","Emily","Emma","Olivia","Sophia","Isabella","Mia","Amelia","Benjamin","Lucas","Ethan","Alexander","Henry","Ava","Charlotte","Lily","Grace","Chloe","Hannah","Ella","Natalie"];
    const LAST=["Smith","Johnson","Williams","Brown","Jones","Garcia","Miller","Davis","Wilson","Anderson","Taylor","Moore","Jackson","Martin","Lee","Perez","Thompson","White","Harris","Clark","Lewis","Robinson","Walker","Young","Allen","King","Wright","Scott","Torres","Nguyen"];
    const pick=a=>a[Math.floor(Math.random()*a.length)];
    function genFirstName(){ $("fname").value=pick(FIRST); }
    function genLastName(){ $("lname").value=pick(LAST); }
    function genNames(){ genFirstName(); genLastName(); }

    async function copyField(id){ const v=$(id).value||""; if(!v) return toast("Ø§Ù„Ø­Ù‚Ù„ ÙØ§Ø±Øº"); await navigator.clipboard.writeText(v); toast("ØªÙ… Ø§Ù„Ù†Ø³Ø®: "+v); }
    async function copyAll(){ const d=collect(); const t=`Email: ${d.email}\nPassword: ${d.password}\nFirst Name: ${d.fname}\nLast Name: ${d.lname}\nDate of Birth: ${d.dob}\nPhone: ${d.phone}`; await navigator.clipboard.writeText(t); toast("ØªÙ… Ù†Ø³Ø® Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„"); }

    function collect(){ return { email:$("email").value.trim(), password:$("password").value.trim(), fname:$("fname").value.trim(), lname:$("lname").value.trim(), dob:$("dob").value.trim(), phone:$("phone").value.trim() }; }
    function dynBase(){ if(BASE_URL && BASE_URL.trim()) return BASE_URL; const u=new URL(location.href); return u.origin+u.pathname.replace(/index\.html$/,''); }
    function buildLink(){ const d=collect(); if(!d.email||!d.password) return null; const params=new URLSearchParams(d); let base=dynBase(); if(!base.endsWith("/")) base+="/"; return base+"?"+params.toString(); }
    function prefillFromURL(){ const q=new URLSearchParams(location.search); ["email","password","fname","lname","dob","phone"].forEach(k=>{const v=q.get(k); if(v!==null) $(k).value=v; }); }
    function makeQR(){ const link=buildLink(); if(!link) return toast("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"); $("qrcode").innerHTML=""; new QRCode($("qrcode"),{text:link,width:220,height:220,correctLevel:QRCode.CorrectLevel.H}); }
    async function saveCardImage(){ const canvas=await html2canvas($("card-root"),{scale:2,useCORS:true,backgroundColor:null}); const url=canvas.toDataURL("image/png"); const a=document.createElement("a"); a.href=url; a.download="apple-id-card.png"; a.click(); }
  </script>
</body>
</html>
